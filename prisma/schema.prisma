generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

//////////////////////////////
// NextAuth required models //
//////////////////////////////

model users {
  id        Int @id @default(autoincrement()) 
  name      String?
  email     String @unique
  password  String?
  booksHave booksHave[]
  receivedRequest RentalRequest[] @relation("RequestData")
  sentRequest RentalRequest[] @relation("OwnerData")
}

model RentalRequest{
  id Int @id @default(autoincrement())
  status  rentalRequestEnum @default(PENDING)
  bookOwnerId Int
  BookOwnerId users @relation("OwnerData",fields: [bookOwnerId],references: [id])
  RequestMessage String ?

  rentalId Int
  RentalId users @relation("RequestData",fields: [rentalId],references: [id])
  createdAt DateTime @default(now())
}

model order{
  id Int @id @default(autoincrement())


}





model booksHave{
  id Int @id @default(autoincrement())
  bookname String 
  cover String?
  publishDate DateTime @default(now())
  bookType BookType @default(AllGenres)
  owner users  @relation(fields: [ownerId], references: [id])
  ownerId Int

  borrow borrows[]

  status statusType @default(AVAILABLE)
}

model borrows{
  id Int @id @default(autoincrement())

  ownerId Int
  OwnerId users @relation(fields: [ownerId],references: [id]) 

  rentedOwnerId Int
  RentedOwnerId users @relation(fields: [rentedOwnerId],references: [id])


}

enum statusType{
  AVAILABLE
  GIVEN
}
 enum BookType{
  AllGenres
  Fiction
  Classic
  Contemporary
  Mystery
  Sci_Fi
  Fantasy
  Non_Fiction
}

enum rentalRequestEnum{
  ACCEPTED
  REJECTED
  PENDING
  EXPIRE
}


